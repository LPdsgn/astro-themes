---
// ThemeSelect component - demonstrates theme selection with system preference
---

<select
  id="theme-select"
  class="px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-0 outline-none cursor-pointer"
>
  <option value="system">System</option>
  <option value="light">Light</option>
  <option value="dark">Dark</option>
</select>

<script>
  const select = document.getElementById('theme-select') as HTMLSelectElement;
  
  // Set initial value
  if (window.__ASTRO_THEMES__) {
    select.value = window.__ASTRO_THEMES__.theme;
  }
  
  // Listen for changes
  select?.addEventListener('change', (e) => {
    const themes = window.__ASTRO_THEMES__;
    if (themes) {
      themes.setTheme((e.target as HTMLSelectElement).value);
    }
  });
  
  // Update select when theme changes (e.g., from another tab)
  window.addEventListener('astro-themes:change', ((e: CustomEvent<{ theme: string; resolvedTheme: string }>) => {
    select.value = e.detail.theme;
  }) as EventListener);
</script>
